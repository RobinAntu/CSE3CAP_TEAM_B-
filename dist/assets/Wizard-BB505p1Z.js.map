{"version":3,"file":"Wizard-BB505p1Z.js","sources":["../../src/pages/Wizard.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { getFunctions, httpsCallable } from 'firebase/functions';\nimport { useAppContext } from '../context/AppContext';\n\nconst Wizard = () => {\n  const [prompt, setPrompt] = useState('');\n  const [response, setResponse] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { addSubject, addAssessment, addFixedSlot, addTask, addStudySession } = useAppContext();\n\n  const getAISuggestions = httpsCallable(getFunctions(), 'getAISuggestions');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const result = await getAISuggestions({ prompt });\n      const data = result.data;\n\n      if (data.tool === 'create_subject') {\n        addSubject(data.arguments);\n        setResponse(`A new subject, ${data.arguments.course_code}: ${data.arguments.title}, has been added to your schedule.`);\n      } else if (data.tool === 'add_assessment_to_subject') {\n        addAssessment(data.arguments.course_code, data.arguments);\n        setResponse(`A new assessment, ${data.arguments.title}, has been added to ${data.arguments.course_code}.`);\n      } else if (data.tool === 'add_fixed_slot_to_subject') {\n        addFixedSlot(data.arguments.course_code, data.arguments);\n        setResponse(`A new ${data.arguments.type} has been added to ${data.arguments.course_code} on ${data.arguments.day} from ${data.arguments.start_time} to ${data.arguments.end_time}.`);\n      } else if (data.tool === 'create_task') {\n        addTask(data.arguments);\n        setResponse(`A new task, ${data.arguments.title}, has been created for ${data.arguments.course_code}.`);\n      } else if (data.tool === 'add_task_to_subject') {\n        addTask(data.arguments);\n        setResponse(`A new task, ${data.arguments.title}, has been added to ${data.arguments.course_code}.`);\n      } else if (data.tool === 'create_study_session') {\n        addStudySession(data.arguments);\n        const { start_time, end_time, task_title } = data.arguments;\n        const startDate = new Date(start_time);\n        const endDate = new Date(end_time);\n        setResponse(`A new study session for '${task_title}' has been scheduled on ${startDate.toLocaleDateString()} from ${startDate.toLocaleTimeString()} to ${endDate.toLocaleTimeString()}.`);\n      } else {\n        const suggestions = data.suggestions;\n        if (prompt.toLowerCase().includes('add subject') && suggestions && typeof suggestions === 'string') {\n          const parts = suggestions.split(':');\n          if (parts.length > 1) {\n            const course_code = parts[0].trim();\n            const rest = parts.slice(1).join(':');\n            const titleMatch = rest.match(/^\\s*([^\\-–—]+)/); // Match until a dash\n            if (titleMatch) {\n              const title = titleMatch[1].trim();\n              addSubject({ course_code, title });\n              setResponse(`A new subject, ${course_code}: ${title}, has been added to your schedule.`);\n            } else {\n              setResponse(suggestions);\n            }\n          } else {\n            setResponse(suggestions);\n          }\n        } else {\n          setResponse(suggestions);\n        }\n      }\n    } catch (error) { \n      console.error('Error fetching AI suggestions:', error);\n      setResponse('An error occurred. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">AI Wizard</h1>\n      <form onSubmit={handleSubmit}>\n        <textarea\n          className=\"w-full p-2 border rounded\"\n          rows=\"5\"\n          value={prompt}\n          onChange={(e) => setPrompt(e.target.value)}\n          placeholder=\"Enter your prompt here...\"\n        />\n        <button\n          type=\"submit\"\n          className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n          disabled={loading}\n        >\n          {loading ? 'Loading...' : 'Get Feedback'}\n        </button>\n      </form>\n      {response && (\n        <div className=\"mt-4 p-4 border rounded bg-gray-100\">\n          <h2 className=\"text-xl font-semibold\">AI Feedback:</h2>\n          <p>{response}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Wizard;\n"],"names":["useState","jsxs","jsx"],"mappings":"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"}