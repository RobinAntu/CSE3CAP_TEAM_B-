{"version":3,"file":"Wizard-mtRibr1X.js","sources":["../../src/pages/Wizard.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { getFunctions, httpsCallable } from 'firebase/functions';\nimport { useAppContext } from '../context/AppContext';\n\nconst Wizard = () => {\n  const [prompt, setPrompt] = useState('');\n  const [response, setResponse] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { addSubject, addAssessment, addFixedSlot, addTask, addStudySession } = useAppContext();\n\n  const getAISuggestions = httpsCallable(getFunctions(), 'getAISuggestions');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const result = await getAISuggestions({ prompt });\n      const data = result.data;\n\n      if (data.tool === 'create_subject') {\n        addSubject(data.arguments);\n        setResponse(`A new subject, ${data.arguments.course_code}: ${data.arguments.title}, has been added to your schedule.`);\n      } else if (data.tool === 'add_assessment_to_subject') {\n        addAssessment(data.arguments.course_code, data.arguments);\n        setResponse(`A new assessment, ${data.arguments.title}, has been added to ${data.arguments.course_code}.`);\n      } else if (data.tool === 'add_fixed_slot_to_subject') {\n        addFixedSlot(data.arguments.course_code, data.arguments);\n        setResponse(`A new ${data.arguments.type} has been added to ${data.arguments.course_code} on ${data.arguments.day} from ${data.arguments.start_time} to ${data.arguments.end_time}.`);\n      } else if (data.tool === 'create_task') {\n        addTask(data.arguments);\n        setResponse(`A new task, ${data.arguments.title}, has been created for ${data.arguments.course_code}.`);\n      } else if (data.tool === 'add_task_to_subject') {\n        addTask(data.arguments);\n        setResponse(`A new task, ${data.arguments.title}, has been added to ${data.arguments.course_code}.`);\n      } else if (data.tool === 'create_study_session') {\n        addStudySession(data.arguments);\n        const { start_time, end_time, task_title } = data.arguments;\n        const startDate = new Date(start_time);\n        const endDate = new Date(end_time);\n        setResponse(`A new study session for '${task_title}' has been scheduled on ${startDate.toLocaleDateString()} from ${startDate.toLocaleTimeString()} to ${endDate.toLocaleTimeString()}.`);\n      } else {\n        const suggestions = data.suggestions;\n        if (prompt.toLowerCase().includes('add subject') && suggestions && typeof suggestions === 'string') {\n          const parts = suggestions.split(':');\n          if (parts.length > 1) {\n            const course_code = parts[0].trim();\n            const rest = parts.slice(1).join(':');\n            const titleMatch = rest.match(/^\\s*([^\\-–—]+)/); // Match until a dash\n            if (titleMatch) {\n              const title = titleMatch[1].trim();\n              addSubject({ course_code, title });\n              setResponse(`A new subject, ${course_code}: ${title}, has been added to your schedule.`);\n            } else {\n              setResponse(suggestions);\n            }\n          } else {\n            setResponse(suggestions);\n          }\n        } else {\n          setResponse(suggestions);\n        }\n      }\n    } catch (error) { \n      console.error('Error fetching AI suggestions:', error);\n      setResponse('An error occurred. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">AI Wizard</h1>\n      <form onSubmit={handleSubmit}>\n        <textarea\n          className=\"w-full p-2 border rounded\"\n          rows=\"5\"\n          value={prompt}\n          onChange={(e) => setPrompt(e.target.value)}\n          placeholder=\"Enter your prompt here...\"\n        />\n        <button\n          type=\"submit\"\n          className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n          disabled={loading}\n        >\n          {loading ? 'Loading...' : 'Get Feedback'}\n        </button>\n      </form>\n      {response && (\n        <div className=\"mt-4 p-4 border rounded bg-gray-100\">\n          <h2 className=\"text-xl font-semibold\">AI Feedback:</h2>\n          <p>{response}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Wizard;\n"],"names":["Wizard","prompt","setPrompt","useState","response","setResponse","loading","setLoading","addSubject","addAssessment","addFixedSlot","addTask","addStudySession","useAppContext","getAISuggestions","httpsCallable","getFunctions","jsxs","className","children","jsx","onSubmit","async","e","preventDefault","data","tool","arguments","course_code","title","type","day","start_time","end_time","task_title","startDate","Date","endDate","toLocaleDateString","toLocaleTimeString","suggestions","toLowerCase","includes","parts","split","length","trim","titleMatch","slice","join","match","error","console","rows","value","onChange","target","placeholder","disabled"],"mappings":"yGAIA,MAAMA,EAAS,KACb,MAAOC,EAAQC,GAAaC,EAAAA,SAAS,KAC9BC,EAAUC,GAAeF,EAAAA,SAAS,KAClCG,EAASC,GAAcJ,EAAAA,UAAS,IACjCK,WAAEA,EAAAC,cAAYA,EAAAC,aAAeA,UAAcC,EAAAC,gBAASA,GAAoBC,IAExEC,EAAmBC,EAAcC,IAAgB,oBA4DvD,SACEC,KAAC,MAAA,CAAIC,UAAU,MACbC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,0BAA0BC,SAAA,gBACxCF,KAAC,OAAA,CAAKI,SA7DWC,MAAOC,IAC1BA,EAAEC,iBACFjB,GAAW,GACX,IACE,MACMkB,SADeX,EAAiB,CAAEb,YACpBwB,KAEpB,GAAkB,mBAAdA,EAAKC,KACPlB,EAAWiB,EAAKE,WAChBtB,EAAY,kBAAkBoB,EAAKE,UAAUC,gBAAgBH,EAAKE,UAAUE,gDAC9E,GAAyB,8BAAdJ,EAAKC,KACdjB,EAAcgB,EAAKE,UAAUC,YAAaH,EAAKE,WAC/CtB,EAAY,qBAAqBoB,EAAKE,UAAUE,4BAA4BJ,EAAKE,UAAUC,qBAC7F,GAAyB,8BAAdH,EAAKC,KACdhB,EAAae,EAAKE,UAAUC,YAAaH,EAAKE,WAC9CtB,EAAY,SAASoB,EAAKE,UAAUG,0BAA0BL,EAAKE,UAAUC,kBAAkBH,EAAKE,UAAUI,YAAYN,EAAKE,UAAUK,iBAAiBP,EAAKE,UAAUM,kBAC3K,GAAyB,gBAAdR,EAAKC,KACdf,EAAQc,EAAKE,WACbtB,EAAY,eAAeoB,EAAKE,UAAUE,+BAA+BJ,EAAKE,UAAUC,qBAC1F,GAAyB,wBAAdH,EAAKC,KACdf,EAAQc,EAAKE,WACbtB,EAAY,eAAeoB,EAAKE,UAAUE,4BAA4BJ,EAAKE,UAAUC,qBACvF,GAAyB,yBAAdH,EAAKC,KAAiC,CAC/Cd,EAAgBa,EAAKE,WACrB,MAAMK,WAAEA,EAAAC,SAAYA,EAAAC,WAAUA,GAAeT,EAAKE,UAC5CQ,EAAY,IAAIC,KAAKJ,GACrBK,EAAU,IAAID,KAAKH,GACzB5B,EAAY,4BAA4B6B,4BAAqCC,EAAUG,6BAA6BH,EAAUI,2BAA2BF,EAAQE,wBACnK,KAAO,CACL,MAAMC,EAAcf,EAAKe,YACzB,GAAIvC,EAAOwC,cAAcC,SAAS,gBAAkBF,GAAsC,iBAAhBA,EAA0B,CAClG,MAAMG,EAAQH,EAAYI,MAAM,KAChC,GAAID,EAAME,OAAS,EAAG,CACpB,MAAMjB,EAAce,EAAM,GAAGG,OAEvBC,EADOJ,EAAMK,MAAM,GAAGC,KAAK,KACTC,MAAM,kBAC9B,GAAIH,EAAY,CACd,MAAMlB,EAAQkB,EAAW,GAAGD,OAC5BtC,EAAW,CAAEoB,cAAaC,UAC1BxB,EAAY,kBAAkBuB,MAAgBC,sCAChD,MACExB,EAAYmC,EAEhB,MACEnC,EAAYmC,EAEhB,MACEnC,EAAYmC,EAEhB,CACF,OAASW,GACPC,QAAQD,MAAM,iCAAkCA,GAChD9C,EAAY,uCACd,CAAA,QACEE,GAAW,EACb,GAOIY,SAAA,CAAAC,EAAAA,IAAC,WAAA,CACCF,UAAU,4BACVmC,KAAK,IACLC,MAAOrD,EACPsD,SAAWhC,GAAMrB,EAAUqB,EAAEiC,OAAOF,OACpCG,YAAY,8BAEdrC,EAAAA,IAAC,SAAA,CACCU,KAAK,SACLZ,UAAU,kEACVwC,SAAUpD,EAETa,WAAU,aAAe,oBAG7Bf,GACCa,EAAAA,KAAC,MAAA,CAAIC,UAAU,sCACbC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,wBAAwBC,SAAA,mBACtCC,IAAC,KAAGD,SAAAf"}